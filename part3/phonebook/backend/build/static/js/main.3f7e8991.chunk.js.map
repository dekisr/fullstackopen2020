{"version":3,"sources":["services/persons.js","components/Filter.js","components/PersonForm.js","components/Person.js","components/Persons.js","components/Notification.js","components/App.js","index.js"],"names":["baseUrl","axios","get","then","response","data","personObj","post","id","put","delete","_","Filter","filter","handleChange","value","onChange","e","PersonForm","addPerson","newName","newNumber","onSubmit","type","Person","person","removePerson","name","number","onClick","className","Persons","persons","toLowerCase","includes","map","key","Notification","notification","message","App","useState","setPersons","setNewName","setNewNumber","setFilter","setNotification","useEffect","personService","catch","error","console","log","setTimeout","target","event","preventDefault","newPerson","checkPerson","find","alert","window","confirm","resPerson","concat","personToDelete","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.3f7e8991.chunk.js","sourcesContent":["import axios from 'axios'\n\nconst baseUrl = '/api/persons'\n\nconst getAll = () =>\n  axios.get(baseUrl)\n    .then((response) => response.data)\n\nconst add = (personObj) =>\n  axios\n    .post(baseUrl, personObj)\n    .then((response) => response.data)\n\nconst update = (id, personObj) =>\n    axios\n    .put(`${baseUrl}/${id}`, personObj)\n    .then((response) => response.data)\n\nconst remove = (id) =>\n  axios\n    .delete(`${baseUrl}/${id}`)\n    .then(_=> 'Person deleted.')\n\nexport default { getAll, add, update, remove }\n","import React from 'react'\n\nconst Filter = ({ filter, handleChange }) => {\n  return (\n    <div>\n      filter shown with{' '}\n      <input value={filter} onChange={(e) => handleChange(e, 'filter')} />\n    </div>\n  )\n}\n\nexport default Filter\n","import React from 'react'\n\nconst PersonForm = ({ addPerson, newName, newNumber, handleChange }) => {\n  return (\n    <form onSubmit={addPerson}>\n      <div>\n        name:{' '}\n        <input value={newName} onChange={(e) => handleChange(e, 'name')} />\n      </div>\n      <div>\n        number:{' '}\n        <input value={newNumber} onChange={(e) => handleChange(e, 'number')} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  )\n}\n\nexport default PersonForm\n","import React from 'react'\n\nconst Person = ({ person, removePerson }) => {\n  return (\n    <li>\n      {person.name} {person.number}\n      <button onClick={() => removePerson(person.id)} className=\"delete\">\n        ✘ delete\n      </button>\n    </li>\n  )\n}\n\nexport default Person\n","import React from 'react'\nimport Person from './Person'\n\nconst Persons = ({ persons, filter, removePerson }) => {\n  return (\n    <ul>\n      {persons\n        .filter((person) => person.name.toLowerCase().includes(filter.toLowerCase()))\n        .map((person) => (\n          <Person key={person.id} person={person} removePerson={removePerson} />\n        ))}\n    </ul>\n  )\n}\n\nexport default Persons\n","import React from 'react'\n\nconst Notification = ({ notification }) => {\n  return notification === null\n    ? null\n    : (\n      <div className={`notification ${notification.type}`}>\n        {notification.message}\n      </div>\n    )\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport personService from '../services/persons'\n\nimport Filter from './Filter'\nimport PersonForm from './PersonForm'\nimport Persons from './Persons'\nimport Notification from './Notification'\n\nconst App = () => {\n  const [persons, setPersons] = useState([])\n  const [newName, setNewName] = useState('')\n  const [newNumber, setNewNumber] = useState('')\n  const [filter, setFilter] = useState('')\n  const [notification, setNotification] = useState(null)\n\n  useEffect(() => {\n    // fetch('http://localhost:3001/persons')\n    //   .then((response) => response.json())\n    //   .then((data) => setPersons(data))\n    personService\n      .getAll()\n      .then((persons) => setPersons(persons))\n      .catch((error) => {\n        // alert(\n        //   `Failed while fetching data from the server.` +\n        //     `\\nERROR -> ${error.message}.`\n        // )\n        console.log(error)\n        setNotification({\n          type: 'error',\n          message: 'Failed while fetching data from the server.',\n        })\n        setTimeout(() => {\n          setNotification(null)\n        }, 5000)\n      })\n  }, [])\n\n  const addPerson = (event) => {\n    event.preventDefault()\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n      // id: persons.length + 1,\n    }\n\n    setNewName('')\n    setNewNumber('')\n    setFilter('')\n\n    const checkPerson = persons.find(\n      (person) => person.name.toLowerCase() === newPerson.name.toLowerCase()\n    )\n    const getId = () => {\n      const samePerson = persons.find(\n        (person) => person.name.toLowerCase() === newPerson.name.toLowerCase()\n      )\n      return samePerson.id\n    }\n\n    return checkPerson && checkPerson.number === newPerson.number\n      ? alert(\n          `${newPerson.name} (${newPerson.number}) ` +\n            `is already added to phonebook`\n        )\n      : checkPerson\n      ? window.confirm(\n          `${newPerson.name} is already added to phonebook, ` +\n            `replace the old number with a new one?`\n        ) &&\n        personService\n          .update(getId(), newPerson)\n          .then((resPerson) =>\n            setPersons((persons) =>\n              persons.map((person) =>\n                person.id === resPerson.id\n                  ? { ...person, number: resPerson.number }\n                  : person\n              )\n            )\n          )\n          .then(() => {\n            setNotification({\n              type: 'success',\n              message: `Updated ${newPerson.name}’s number`,\n            })\n            setTimeout(() => {\n              setNotification(null)\n            }, 5000)\n          })\n          .catch((error) => {\n            // alert(\n            //   `Failed while updating the number.`\n            //   +`\\nERROR -> ${error.message}.`\n            // )\n            console.log(error.response.data.error)\n            setNotification({\n              type: 'error',\n              message: error.response.data.error,\n            })\n            setTimeout(() => {\n              setNotification(null)\n            }, 5000)\n          })\n      : // setNotification({\n        //   type: 'error',\n        //   message: `Updated function not working...`\n        // })\n        personService\n          .add(newPerson)\n          .then((person) => setPersons((persons) => persons.concat(person)))\n          .then(() => {\n            setNotification({\n              type: 'success',\n              message: `Added ${newPerson.name}`,\n            })\n            setTimeout(() => {\n              setNotification(null)\n            }, 5000)\n          })\n          .catch((error) => {\n            // alert(\n            //   `Failed while adding new person to the server.`\n            //   +`\\nERROR -> ${error.message}.`\n            // )\n            // console.log('hey')\n            console.log(error.response.data.error)\n            setNotification({\n              type: 'error',\n              message: error.response.data.error,\n            })\n            setTimeout(() => {\n              setNotification(null)\n            }, 5000)\n          })\n  }\n\n  const removePerson = (id) => {\n    const personToDelete = persons.find((person) => person.id === id)\n    return (\n      window.confirm(`Delete ${personToDelete.name}?`) &&\n      personService\n        .remove(id)\n        .then(() =>\n          setPersons((persons) => persons.filter((person) => person.id !== id))\n        )\n        .then(() => {\n          setNotification({\n            type: 'success',\n            message: `Removed ${personToDelete.name}`,\n          })\n          setTimeout(() => {\n            setNotification(null)\n          }, 5000)\n        })\n        .catch((error) => {\n          // alert(`Failed while removing the person.`\n          // +`\\nERROR -> ${error.message}.`)\n          console.log(error.response.data.error)\n          setNotification({\n            type: 'error',\n            message: error.response.data.error,\n          })\n          setTimeout(() => {\n            setNotification(null)\n          }, 5000)\n          setPersons((persons) => persons.filter((person) => person.id !== id))\n        })\n    )\n  }\n\n  const handleChange = ({ target: { value } }, type) => {\n    type === 'name'\n      ? setNewName(value)\n      : type === 'number'\n      ? setNewNumber(value)\n      : setFilter(value)\n  }\n  // const handleNameChange = (event) => {\n  //   console.log('Name Input', event.target.value)\n  //   setNewName(event.target.value)\n  // }\n\n  return (\n    <main>\n      <Notification notification={notification} />\n      <h1>Phonebook</h1>\n      <Filter filter={filter} handleChange={handleChange} />\n      <hr />\n      <h2>add a new</h2>\n      <PersonForm\n        addPerson={addPerson}\n        newName={newName}\n        newNumber={newNumber}\n        handleChange={handleChange}\n      />\n      <hr />\n      <h3>Numbers</h3>\n      <Persons persons={persons} removePerson={removePerson} filter={filter} />\n    </main>\n  )\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './components/App'\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}