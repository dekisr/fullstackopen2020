(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{15:function(e,n,t){e.exports=t(38)},37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var r=t(0),a=t.n(r),o=t(14),u=t.n(o),c=t(4),i=t(2),l=t(3),s=t.n(l),m="/api/persons",f=function(){return s.a.get(m).then((function(e){return e.data}))},d=function(e){return s.a.post(m,e).then((function(e){return e.data}))},h=function(e,n){return s.a.put("".concat(m,"/").concat(e),n).then((function(e){return e.data}))},p=function(e){return s.a.delete("".concat(m,"/").concat(e)).then((function(e){return"Person deleted."}))},b=function(e){var n=e.filter,t=e.handleChange;return a.a.createElement("div",null,"filter shown with"," ",a.a.createElement("input",{value:n,onChange:function(e){return t(e,"filter")}}))},v=function(e){var n=e.addPerson,t=e.newName,r=e.newNumber,o=e.handleChange;return a.a.createElement("form",{onSubmit:n},a.a.createElement("div",null,"name:"," ",a.a.createElement("input",{value:t,onChange:function(e){return o(e,"name")}})),a.a.createElement("div",null,"number:"," ",a.a.createElement("input",{value:r,onChange:function(e){return o(e,"number")}})),a.a.createElement("div",null,a.a.createElement("button",{type:"submit"},"add")))},E=function(e){var n=e.person,t=e.removePerson;return a.a.createElement("li",null,n.name," ",n.number,a.a.createElement("button",{onClick:function(){return t(n.id)},className:"delete"},"\u2718 delete"))},g=function(e){var n=e.persons,t=e.filter,r=e.removePerson;return a.a.createElement("ul",null,n.filter((function(e){return e.name.toLowerCase().includes(t.toLowerCase())})).map((function(e){return a.a.createElement(E,{key:e.id,person:e,removePerson:r})})))},w=function(e){var n=e.notification;return null===n?null:a.a.createElement("div",{className:"notification ".concat(n.type)},n.message)},C=function(){var e=Object(r.useState)([]),n=Object(i.a)(e,2),t=n[0],o=n[1],u=Object(r.useState)(""),l=Object(i.a)(u,2),s=l[0],m=l[1],E=Object(r.useState)(""),C=Object(i.a)(E,2),j=C[0],y=C[1],O=Object(r.useState)(""),k=Object(i.a)(O,2),P=k[0],N=k[1],S=Object(r.useState)(null),T=Object(i.a)(S,2),L=T[0],D=T[1];Object(r.useEffect)((function(){f().then((function(e){return o(e)})).catch((function(e){console.log(e),D({type:"error",message:"Failed while fetching data from the server."}),setTimeout((function(){D(null)}),5e3)}))}),[]);var J=function(e,n){var t=e.target.value;"name"===n?m(t):"number"===n?y(t):N(t)};return a.a.createElement("main",null,a.a.createElement(w,{notification:L}),a.a.createElement("h1",null,"Phonebook"),a.a.createElement(b,{filter:P,handleChange:J}),a.a.createElement("hr",null),a.a.createElement("h2",null,"add a new"),a.a.createElement(v,{addPerson:function(e){e.preventDefault();var n={name:s,number:j};m(""),y(""),N("");var r=t.find((function(e){return e.name.toLowerCase()===n.name.toLowerCase()}));return r&&r.number===n.number?alert("".concat(n.name," (").concat(n.number,") ")+"is already added to phonebook"):r?window.confirm("".concat(n.name," is already added to phonebook, ")+"replace the old number with a new one?")&&h(t.find((function(e){return e.name.toLowerCase()===n.name.toLowerCase()})).id,n).then((function(e){return o((function(n){return n.map((function(n){return n.id===e.id?Object(c.a)(Object(c.a)({},n),{},{number:e.number}):n}))}))})).then((function(){D({type:"success",message:"Updated ".concat(n.name,"\u2019s number")}),setTimeout((function(){D(null)}),5e3)})).catch((function(e){console.log(e.response.data.error),D({type:"error",message:e.response.data.error}),setTimeout((function(){D(null)}),5e3)})):d(n).then((function(e){return o((function(n){return n.concat(e)}))})).then((function(){D({type:"success",message:"Added ".concat(n.name)}),setTimeout((function(){D(null)}),5e3)})).catch((function(e){console.log(e.response.data.error),D({type:"error",message:e.response.data.error}),setTimeout((function(){D(null)}),5e3)}))},newName:s,newNumber:j,handleChange:J}),a.a.createElement("hr",null),a.a.createElement("h3",null,"Numbers"),a.a.createElement(g,{persons:t,removePerson:function(e){var n=t.find((function(n){return n.id===e}));return window.confirm("Delete ".concat(n.name,"?"))&&p(e).then((function(){return o((function(n){return n.filter((function(n){return n.id!==e}))}))})).then((function(){D({type:"success",message:"Removed ".concat(n.name)}),setTimeout((function(){D(null)}),5e3)})).catch((function(n){console.log(n.response.data.error),D({type:"error",message:n.response.data.error}),setTimeout((function(){D(null)}),5e3),o((function(n){return n.filter((function(n){return n.id!==e}))}))}))},filter:P}))};t(37);u.a.render(a.a.createElement(a.a.StrictMode,null,a.a.createElement(C,null)),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.3f7e8991.chunk.js.map